/*! For license information please see app.71c09c33.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[524],{8765:(e,t,n)=>{n(1142);var r=n(6540),a=n(5338),i=(n(2675),n(9463),n(2259),n(6280),n(6918),n(8706),n(3418),n(4346),n(3792),n(2062),n(4114),n(4782),n(739),n(3288),n(4170),n(2010),n(3110),n(9904),n(4185),n(875),n(3548),n(287),n(6099),n(3362),n(7495),n(906),n(8781),n(7764),n(2953),n(5837)),c=n(6172),o=n(4533),s=n(4279),l=n(5577),u=n(4848);function d(e){var t=e.pickupDatetime,n=e.setPickupDatetime,r=e.onNext,a=(0,c.f)(new Date,1),d=t?new Date(t):null;return(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block mb-2 font-medium",children:"Pickup date and time"}),(0,u.jsx)(i.Ay,{selected:d,onChange:function(e){if(e){var t=(0,l.GP)(e,"yyyy-MM-dd'T'HH:mm");n(t)}else n(null)},showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:30,dateFormat:"yyyy-MM-dd HH:mm",minDate:a,minTime:(0,o.a)((0,s.g)(new Date,0),8),maxTime:(0,o.a)((0,s.g)(new Date,0),20),placeholderText:"Pick a date and time",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-md text-lg focus:outline-none focus:ring-2 focus:ring-blue-600"}),(0,u.jsx)("div",{className:"mt-6 flex justify-end",children:(0,u.jsx)("button",{disabled:!t,onClick:r,className:"px-6 py-2 rounded text-white ".concat(t?"bg-blue-600 hover:bg-blue-700":"bg-gray-400 cursor-not-allowed"),children:"Next"})})]})}function m(e){var t=e.returnDatetime,n=e.setReturnDatetime,r=e.onNext,a=e.onBack,d=e.pickupDatetime;if(!d)return(0,u.jsx)("p",{children:"Please, pick date on a previous step."});var m=(0,c.f)(new Date(d),1),f=(0,c.f)(new Date(d),60),h=t?new Date(t):null;return(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block mb-2 font-medium text-gray-700",children:"Return date and time"}),(0,u.jsx)(i.Ay,{selected:h,onChange:function(e){if(e){var t=(0,l.GP)(e,"yyyy-MM-dd'T'HH:mm");n(t)}else n(null)},showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:30,dateFormat:"yyyy-MM-dd HH:mm",minDate:m,maxDate:f,minTime:(0,o.a)((0,s.g)(new Date,0),8),maxTime:(0,o.a)((0,s.g)(new Date,0),20),placeholderText:"Pick a date and time",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-md text-lg focus:outline-none focus:ring-2 focus:ring-blue-600"}),(0,u.jsxs)("div",{className:"mt-6 flex justify-between",children:[(0,u.jsx)("button",{onClick:a,className:"px-6 py-2 rounded border border-gray-400 hover:bg-gray-100",children:"Back"}),(0,u.jsx)("button",{disabled:!t||t<=d,onClick:r,className:"px-6 py-2 rounded text-white ".concat(t&&t>d?"bg-blue-600 hover:bg-blue-700":"bg-gray-400 cursor-not-allowed"),children:"Next"})]})]})}n(8992),n(1454);function f(e){var t=e.vehicles,n=e.selectedVehicle,r=e.setSelectedVehicle,a=e.onNext,i=e.onBack,c=e.pickupDatetime,o=e.returnDatetime;return(0,u.jsxs)("div",{children:[(0,u.jsx)("h2",{className:"mb-4 font-semibold text-lg",children:"Choose a car"}),(!c||!o)&&(0,u.jsx)("p",{className:"text-red-600 mb-4",children:"Please, firstly pick dates of pickup and return."}),(0,u.jsx)("div",{className:"overflow-x-auto",children:(0,u.jsxs)("table",{className:"min-w-full border border-gray-300 rounded-md overflow-hidden",children:[(0,u.jsx)("thead",{className:"bg-gray-100 text-gray-700 text-sm",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"p-3",children:"Image"}),(0,u.jsx)("th",{className:"p-3",children:"Name"}),(0,u.jsx)("th",{className:"p-3",children:"Price"}),(0,u.jsx)("th",{className:"p-3"})]})}),(0,u.jsxs)("tbody",{className:"text-gray-800",children:[0===t.length&&(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:4,className:"p-4 text-center",children:"No available cars for these dates"})}),t.map(function(e){return(0,u.jsxs)("tr",{className:"border-t ".concat((null==n?void 0:n.id)===e.id?"bg-blue-100":""),children:[(0,u.jsx)("td",{className:"p-3",children:(0,u.jsx)("img",{src:e.image,alt:e.name,className:"w-24 rounded"})}),(0,u.jsx)("td",{className:"p-3 text-center",children:e.name}),(0,u.jsx)("td",{className:"p-3 text-center",children:e.price}),(0,u.jsx)("td",{className:"p-3 text-right",children:(0,u.jsx)("button",{onClick:function(){return r(e)},className:"px-4 py-1 rounded ".concat((null==n?void 0:n.id)===e.id?"bg-green-600 text-white":"bg-blue-600 text-white hover:bg-blue-700"),children:(null==n?void 0:n.id)===e.id?"Chosen":"Choose"})})]},e.id)})]})]})}),(0,u.jsxs)("div",{className:"mt-6 flex justify-between",children:[(0,u.jsx)("button",{onClick:i,className:"px-6 py-2 rounded border border-gray-400 hover:bg-gray-100",children:"Back"}),(0,u.jsx)("button",{disabled:!n,onClick:a,className:"px-6 py-2 rounded text-white ".concat(n?"bg-blue-600 hover:bg-blue-700":"bg-gray-400 cursor-not-allowed"),children:"Next"})]})]})}function h(e){var t=e.pickupCity,n=e.setPickupCity,r=e.returnCity,a=e.setReturnCity,i=e.returnAtDifferentLocation,c=e.setReturnAtDifferentLocation,o=e.onNext,s=e.onBack,l=e.cities;return(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block mb-2 font-medium text-gray-700",children:"Pickup location"}),(0,u.jsxs)("select",{value:t,onChange:function(e){return n(e.target.value)},className:"w-full border border-gray-300 rounded p-2 mb-4",children:[(0,u.jsx)("option",{value:"",children:"Choose a city"}),l.map(function(e){return(0,u.jsx)("option",{value:e,children:e},e)})]}),!i&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("label",{className:"block mb-2 font-medium text-gray-700",children:"Return location"}),(0,u.jsxs)("select",{value:r,onChange:function(e){return a(e.target.value)},className:"w-full border border-gray-300 rounded p-2 mb-4",children:[(0,u.jsx)("option",{value:"",children:"Choose a city"}),l.map(function(e){return(0,u.jsx)("option",{value:e,children:e},e)})]})]}),(0,u.jsx)("div",{className:"mb-6",children:(0,u.jsxs)("label",{className:"inline-flex items-center",children:[(0,u.jsx)("input",{type:"checkbox",checked:i,onChange:function(e){c(e.target.checked),e.target.checked&&a("")},className:"form-checkbox"}),(0,u.jsx)("span",{className:"ml-2",children:"Return at different location for additional fixed fee (149€)"})]})}),(0,u.jsxs)("div",{className:"flex justify-between",children:[(0,u.jsx)("button",{onClick:s,className:"px-6 py-2 rounded border border-gray-400 hover:bg-gray-100",children:"Back"}),(0,u.jsx)("button",{disabled:!t||!i&&!r,onClick:o,className:"px-6 py-2 rounded text-white ".concat(t&&(i||r)?"bg-blue-600 hover:bg-blue-700":"bg-gray-400 cursor-not-allowed"),children:"Next"})]})]})}var x=n(1394);function p(e){var t=e.pickupDatetime,n=e.returnDatetime,r=e.selectedVehicle,a=e.pickupCity,i=e.returnCity,c=e.returnAtDifferentLocation,o=e.onBack,s=e.onConfirm;return(0,u.jsxs)("div",{children:[(0,u.jsx)("h2",{className:"mb-4 text-lg font-semibold",children:"Summary:"}),(0,u.jsxs)("ul",{className:"mb-6 space-y-2",children:[(0,u.jsxs)("li",{children:[(0,u.jsx)("strong",{children:"Pickup date:"})," ",(0,l.GP)((0,x.H)(t),"yyyy-MM-dd HH:mm")]}),(0,u.jsxs)("li",{children:[(0,u.jsx)("strong",{children:"Return date:"})," ",(0,l.GP)((0,x.H)(n),"yyyy-MM-dd HH:mm")]}),(0,u.jsxs)("li",{children:[(0,u.jsx)("strong",{children:"Vehicle:"})," ",null==r?void 0:r.name]}),(0,u.jsxs)("li",{children:[(0,u.jsx)("strong",{children:"Pickup location:"})," ",a]}),!c&&(0,u.jsxs)("li",{children:[(0,u.jsx)("strong",{children:"Return location:"})," ",i]}),c&&(0,u.jsxs)("li",{children:[(0,u.jsx)("strong",{children:"Return at different location:"})," for additional fixed fee (149€)"]})]}),(0,u.jsxs)("div",{className:"flex justify-between",children:[(0,u.jsx)("button",{onClick:o,className:"px-6 py-2 rounded border border-gray-400 hover:bg-gray-100",children:"Back"}),(0,u.jsx)("button",{onClick:s,className:"px-6 py-2 rounded bg-green-600 text-white hover:bg-green-700",children:"Reserve"})]})]})}function b(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,i){var s=r&&r.prototype instanceof o?r:o,l=Object.create(s.prototype);return y(l,"_invoke",function(n,r,a){var i,o,s,l=0,u=a||[],d=!1,m={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return i=t,o=0,s=e,m.n=n,c}};function f(n,r){for(o=n,s=r,t=0;!d&&l&&!a&&t<u.length;t++){var a,i=u[t],f=m.p,h=i[2];n>3?(a=h===r)&&(s=i[(o=i[4])?5:(o=3,3)],i[4]=i[5]=e):i[0]<=f&&((a=n<2&&f<i[1])?(o=0,m.v=r,m.n=i[1]):f<h&&(a=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,m.n=h,o=0))}if(a||n>1)return c;throw d=!0,r}return function(a,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),o=u,s=h;(t=o<2?e:s)||!d;){i||(o?o<3?(o>1&&(m.n=-1),f(o,s)):m.n=s:m.v=s);try{if(l=2,i){if(o||(a="next"),t=i[a]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,o<2&&(o=0)}else 1===o&&(t=i.return)&&t.call(i),o<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),o=1);i=e}else if((t=(d=m.n<0)?s:n.call(r,m))!==c)break}catch(t){i=e,o=1,s=t}finally{l=1}}return{value:t,done:d}}}(n,a,i),!0),l}var c={};function o(){}function s(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(y(t={},r,function(){return this}),t),d=l.prototype=o.prototype=Object.create(u);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,y(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return s.prototype=l,y(d,"constructor",l),y(l,"constructor",s),s.displayName="GeneratorFunction",y(l,a,"GeneratorFunction"),y(d),y(d,a,"Generator"),y(d,r,function(){return this}),y(d,"toString",function(){return"[object Generator]"}),(b=function(){return{w:i,m}})()}function y(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}y=function(e,t,n,r){function i(t,n){y(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},y(e,t,n,r)}function g(e,t,n,r,a,i,c){try{var o=e[i](c),s=o.value}catch(e){return void n(e)}o.done?t(s):Promise.resolve(s).then(r,a)}function v(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function c(e){g(i,r,a,c,o,"next",e)}function o(e){g(i,r,a,c,o,"throw",e)}c(void 0)})}}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,c,o=[],s=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(o.push(r.value),o.length!==t);s=!0);}catch(e){l=!0,a=e}finally{try{if(!s&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var N=["Berlin","Hamburg","Munich","Düsseldorf"];function w(){var e=j((0,r.useState)(1),2),t=e[0],n=e[1],a=j((0,r.useState)(""),2),i=a[0],c=a[1],o=j((0,r.useState)(""),2),s=o[0],l=o[1],x=j((0,r.useState)([]),2),y=x[0],g=x[1],k=j((0,r.useState)(null),2),w=k[0],C=k[1],D=j((0,r.useState)(""),2),P=D[0],S=D[1],T=j((0,r.useState)(""),2),H=T[0],A=T[1],O=j((0,r.useState)(!1),2),R=O[0],B=O[1],M=j(r.useState(""),2),G=M[0],F=M[1],I=j(r.useState(!1),2),L=I[0],V=I[1],E=j(r.useState(!1),2),_=E[0],z=E[1];function J(){return J=v(b().m(function e(t,n){var r,a;return b().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,fetch("/api/vehicles?startDatetime=".concat(t,"&endDatetime=").concat(n));case 1:return r=e.v,e.n=2,r.json();case 2:a=e.v,g(a),C(null),e.n=4;break;case 3:e.p=3,e.v,F("An error while loading vehicles. Please, try again later."),V(!0),z(!0);case 4:return e.a(2)}},e,null,[[0,3]])})),J.apply(this,arguments)}function U(){return(U=v(b().m(function e(){var t,n;return b().w(function(e){for(;;)switch(e.p=e.n){case 0:return t={vehicleId:null==w?void 0:w.id,pickupDatetime:i,returnDatetime:s,pickupCity:P,returnCity:R?P:H,returnAtDifferentLocation:R},e.p=1,e.n=2,fetch("/api/reservations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:(n=e.v).ok?(F("Reservation was successful!"),V(!1),$()):422===n.status?(F("This car is already reserved. Please, try another car or dates."),V(!0)):(F("An error occurred. Please try again."),V(!0)),e.n=4;break;case 3:e.p=3,e.v,F("Network problem. Please try again."),V(!0);case 4:return e.p=4,z(!0),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}))).apply(this,arguments)}(0,r.useEffect)(function(){i&&s&&function(e,t){J.apply(this,arguments)}(i,s)},[i,s]);var $=function(){c(""),l(""),C(null),S(""),A(""),B(!1),n(1)};return(0,u.jsxs)("div",{className:"max-w-4xl mx-auto p-6 bg-white rounded shadow",children:[(0,u.jsx)("div",{className:"flex justify-between mb-8",children:[1,2,3,4,5].map(function(e){return(0,u.jsxs)("div",{className:"flex flex-col items-center ".concat(t===e?"text-blue-600 font-bold":"text-gray-400"),children:[(0,u.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center mb-1 ".concat(t===e?"bg-blue-600 text-white":"bg-gray-300 text-gray-600"),children:e}),(0,u.jsx)("span",{className:"text-xs text-center",children:{1:"Pickup date",2:"Return date",3:"Car selection",4:"Pickup/return cities",5:"Confirmation"}[e]})]},e)})}),1===t&&(0,u.jsx)(d,{pickupDatetime:i,setPickupDatetime:c,onNext:function(){return n(2)}}),2===t&&(0,u.jsx)(m,{returnDatetime:s,setReturnDatetime:l,onNext:function(){return n(3)},onBack:function(){return n(1)},pickupDatetime:i}),3===t&&(0,u.jsx)(f,{vehicles:y,selectedVehicle:w,setSelectedVehicle:C,onNext:function(){return n(4)},onBack:function(){return n(2)},pickupDatetime:i,returnDatetime:s}),4===t&&(0,u.jsx)(h,{pickupCity:P,setPickupCity:S,returnCity:H,setReturnCity:A,returnAtDifferentLocation:R,setReturnAtDifferentLocation:B,onNext:function(){return n(5)},onBack:function(){return n(3)},cities:N}),5===t&&(0,u.jsx)(p,{pickupDatetime:i,returnDatetime:s,selectedVehicle:w,pickupCity:P,returnCity:H,returnAtDifferentLocation:R,onBack:function(){return n(4)},onConfirm:function(){return U.apply(this,arguments)}}),_&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,u.jsxs)("div",{className:"bg-white p-6 rounded shadow max-w-sm w-full text-center",children:[(0,u.jsx)("p",{className:"mb-4 text-lg font-semibold ".concat(L?"text-red-600":"text-green-600"),children:G}),(0,u.jsx)("button",{onClick:function(){return z(!1)},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Close"})]})})]})}var C=document.getElementById("react-root");C&&(0,a.createRoot)(C).render((0,u.jsx)(w,{}))}},e=>{e.O(0,[25],()=>{return t=8765,e(e.s=t);var t});e.O()}]);